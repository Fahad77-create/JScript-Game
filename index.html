<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width= , initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Game</title>
</head>

<body>
    <h1 align="center">CUBE MONSTERS ()</h1>
    <div id="box">
    <p style="position: relative; top:5px ; left:6px ;">Use spaceBar for Jump </p>

        <div style="position: absolute; top:170px ; left: 550px;">
            <button style="display: none;"></button>
        </div>

       <div id="dino"></div>
       <div id="block"></div>
       <div id="block_2"></div>
       <audio src="./asset/jump-sound.wav"></audio>

    </div>
</body>
<script>
    const box = document.querySelector('#box');
    const dino = document.querySelector('#dino');
    const block = document.querySelector('#block');
    const block_2 = document.querySelector('#block_2');
    const h1 = document.querySelector('h1');
    const plyer_sound = document.querySelector('audio');
    const btn = document.querySelector('button');

    // ---- Create a timer display inside the game box ----
    const timeDisplay = document.createElement('div');
    timeDisplay.style.position = 'absolute';
    timeDisplay.style.top = '10px';
    timeDisplay.style.right = '20px';
    timeDisplay.style.fontSize = '22px';
    timeDisplay.style.fontWeight = 'bold';
    timeDisplay.style.color = 'black';
    timeDisplay.style.background = 'rgba(255,255,255,0.6)';
    timeDisplay.style.padding = '5px 10px';
    timeDisplay.style.borderRadius = '8px';
    timeDisplay.style.zIndex = '1000';
    timeDisplay.innerText = 'Time: 0s';
    box.appendChild(timeDisplay);

    let time = 0;
    let timer = null;
    let gameStarted = false;
    let gameOver = false;

    // ---- Start Game ----
    function startGame() {
        if (gameOver) return;

        // Start only once
        if (!gameStarted) {
            gameStarted = true;
            block.style.animation = 'move 2.5s infinite';
            block_2.style.animation = 'move2 6.5s infinite';
            startTimer();
        }

        // Make the dino jump
        plyer_sound.play();
        if (!dino.classList.contains("animate")) {
            dino.classList.add("animate");
            dino.style.backgroundImage = "url(./asset/kangro_jump.png)";
            setTimeout(() => {
                dino.classList.remove("animate");
                dino.style.backgroundImage = "url(./asset/kangro.png)";
            }, 500);
        }
    }

    // ---- Timer ----
    function startTimer() {
        timer = setInterval(() => {
            if (!gameOver) {
                time++;
                timeDisplay.innerText = 'Time: ' + time + 's';
            }
        }, 1000);
    }

    // ---- Desktop: Spacebar ----
    window.addEventListener('keypress', e => {
        if (e.code === "Space") startGame();
    });

    // ---- Mobile: Touch ----
    window.addEventListener('touchstart', () => {
        startGame();
    });

    // ---- Collision Detection ----
    let gameLoop = setInterval(function () {
        if (gameOver) return;

        let dinoTop = parseInt(window.getComputedStyle(dino).getPropertyValue("top"));
        let blockLeft = parseInt(window.getComputedStyle(block).getPropertyValue("left"));
        let blockLeft_2 = parseInt(window.getComputedStyle(block_2).getPropertyValue("left"));

        // Collision check
        if ((blockLeft < 40 && blockLeft > 0 && dinoTop >= 210) ||
            (blockLeft_2 < 40 && blockLeft_2 > 0 && dinoTop >= 210)) {

            clearInterval(timer); // stop timer
            gameOver = true;
            block.style.animation = "none";
            block_2.style.animation = "none";
            h1.innerText = 'GAME OVER..';
            btn.style.display = 'inline-block';
            btn.innerText = 'Play again';
            alert(`You survived for ${time} seconds!`);
        }
    }, 10);

    // ---- Restart ----
    btn.addEventListener('click', () => {
        location.reload();
    });
</script>



</html>
00
